import{j as e}from"./index-1d5000f4.js";import{r as a,L as q,u as le}from"./react-vendor-36975316.js";import{C as v,c as Y,b as G,a as _,B as j}from"./button-86fc270d.js";import{L as F,I as K,P as ne}from"./label-22ca0528.js";import{E as ie,S as oe,A as de,U as Q,a as X,e as V,b as Z,D as me,R as ue}from"./ui-vendor-5b437901.js";function xe({onComplete:t}){const[o,r]=a.useState(""),[m,l]=a.useState(""),[n,u]=a.useState(!1),b=x=>{x.preventDefault(),o.trim()&&m.trim()&&t({name:o.trim(),id:m.trim(),shareData:n})};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-purple-50 flex items-center justify-center p-4",children:e.jsxs(v,{className:"w-full max-w-md bg-white border-slate-200",children:[e.jsxs(Y,{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ie,{className:"w-6 h-6 text-purple-600"})}),e.jsx(G,{className:"text-2xl",children:"Stroop Task Setup"}),e.jsx("p",{className:"text-slate-600",children:"Enter your information to begin"})]}),e.jsx(_,{children:e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"name",children:"Full Name"}),e.jsx(K,{id:"name",type:"text",placeholder:"Enter your full name",value:o,onChange:x=>r(x.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"studentId",children:"Student ID"}),e.jsx(K,{id:"studentId",type:"text",placeholder:"Enter your student ID",value:m,onChange:x=>l(x.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-slate-50 rounded-lg border border-slate-200",children:[e.jsx("input",{id:"shareData",type:"checkbox",checked:n,onChange:x=>u(x.target.checked),className:"w-4 h-4 text-purple-600 rounded focus:ring-purple-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs(F,{htmlFor:"shareData",className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(oe,{className:"w-4 h-4 text-slate-600"}),e.jsx("span",{className:"font-medium text-slate-700",children:"Share my data with class"})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:n?"Your results will be included in class aggregates and visible to instructors.":"Your data will be kept private and not shared with the class."})]})]}),!n&&e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsx(de,{className:"w-4 h-4 text-amber-600 mt-0.5 flex-shrink-0"}),e.jsxs("p",{className:"text-xs text-amber-700",children:[e.jsx("strong",{children:"Private mode:"})," Your individual results will still be available for download at the end, but won't appear in class statistics or instructor dashboards."]})]})]}),e.jsxs(j,{type:"submit",className:"w-full",disabled:!o.trim()||!m.trim(),children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),"Start Practice Trials"]})]})})]})})}function pe({stimulus:t,showStimulus:o,interTrialDelay:r,isPractice:m}){return r?e.jsx("div",{className:"text-center min-h-[200px] flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full"})}):!o||!t?e.jsx("div",{className:"text-center min-h-[200px] flex items-center justify-center",children:e.jsx("div",{className:"text-2xl text-slate-400",children:"+"})}):e.jsxs("div",{className:"text-center min-h-[200px] flex flex-col items-center justify-center",children:[e.jsx("div",{className:"text-6xl font-bold select-none mb-8",style:{color:t.color},children:t.word}),m&&e.jsx("div",{className:"text-sm text-slate-500 space-y-1",children:e.jsxs("div",{className:"flex items-center justify-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("kbd",{className:"px-2 py-1 bg-slate-100 rounded text-xs font-mono",children:"B"}),e.jsx("span",{className:"text-blue-600 font-medium",children:"Blue"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("kbd",{className:"px-2 py-1 bg-slate-100 rounded text-xs font-mono",children:"R"}),e.jsx("span",{className:"text-red-600 font-medium",children:"Red"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("kbd",{className:"px-2 py-1 bg-slate-100 rounded text-xs font-mono",children:"G"}),e.jsx("span",{className:"text-green-600 font-medium",children:"Green"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("kbd",{className:"px-2 py-1 bg-slate-100 rounded text-xs font-mono",children:"Y"}),e.jsx("span",{className:"text-yellow-600 font-medium",children:"Yellow"})]})]})})]})}function he({results:t,studentInfo:o}){const r=t.filter(s=>s.is_correct).length,m=r/t.length*100,l=t.filter(s=>s.is_correct&&s.participant_response!=="timeout").reduce((s,p)=>s+p.reaction_time,0)/r,n=t.filter(s=>s.stimulus_type==="congruent"&&s.is_correct),u=t.filter(s=>s.stimulus_type==="incongruent"&&s.is_correct),b=t.filter(s=>s.stimulus_type==="congruent"&&s.is_correct).length/t.filter(s=>s.stimulus_type==="congruent").length*100,x=t.filter(s=>s.stimulus_type==="incongruent"&&s.is_correct).length/t.filter(s=>s.stimulus_type==="incongruent").length*100,S=n.length>0?n.reduce((s,p)=>s+p.reaction_time,0)/n.length:0,T=u.length>0?u.reduce((s,p)=>s+p.reaction_time,0)/u.length:0,R=T-S,D=()=>{const p=[["student_name","student_id","trial_number","stimulus_type","stimulus_word","stimulus_color","correct_response","participant_response","reaction_time_ms","is_correct","session_start_time","timestamp"].join(","),...t.map(c=>[`"${c.student_name}"`,`"${c.student_id}"`,c.trial_number,c.stimulus_type,c.stimulus_word,c.stimulus_color,c.correct_response,c.participant_response,c.reaction_time,c.is_correct,c.session_start_time,c.timestamp].join(","))].join(`
`),k=new Blob([p],{type:"text/csv"}),h=URL.createObjectURL(k),f=document.createElement("a");f.href=h,f.download=`stroop_${o.name.replace(/\s+/g,"_")}_results.csv`,document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(h)};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-purple-50 p-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto pt-8",children:[e.jsxs(v,{className:"bg-white border-slate-200 mb-8",children:[e.jsxs(Y,{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(X,{className:"w-8 h-8 text-green-600"})}),e.jsx(G,{className:"text-3xl",children:"Task Complete!"}),e.jsxs("p",{className:"text-slate-600",children:["Excellent work, ",o.name,"!"]})]}),e.jsxs(_,{className:"space-y-8",children:[e.jsxs("div",{className:"grid md:grid-cols-3 gap-6 text-center",children:[e.jsxs("div",{className:"bg-slate-50 rounded-lg p-6",children:[e.jsxs("div",{className:"text-3xl font-bold text-slate-900 mb-2",children:[m.toFixed(1),"%"]}),e.jsx("div",{className:"text-slate-600",children:"Overall Accuracy"})]}),e.jsxs("div",{className:"bg-slate-50 rounded-lg p-6",children:[e.jsxs("div",{className:"text-3xl font-bold text-slate-900 mb-2",children:[l?l.toFixed(0):"0","ms"]}),e.jsx("div",{className:"text-slate-600",children:"Average Response Time"})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-6 border border-purple-200",children:[e.jsxs("div",{className:"text-3xl font-bold text-purple-900 mb-2",children:["+",R.toFixed(0),"ms"]}),e.jsx("div",{className:"text-purple-700 font-medium",children:"Stroop Effect"})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg p-6 border border-purple-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(V,{className:"w-5 h-5 text-purple-600"}),"Performance Analysis"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium text-slate-800",children:"Congruent Trials"}),e.jsxs("div",{className:"text-sm text-slate-600 space-y-1",children:[e.jsxs("div",{children:["Accuracy: ",e.jsxs("span",{className:"font-medium",children:[b.toFixed(1),"%"]})]}),e.jsxs("div",{children:["Avg RT: ",e.jsxs("span",{className:"font-medium",children:[S.toFixed(0),"ms"]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium text-slate-800",children:"Incongruent Trials"}),e.jsxs("div",{className:"text-sm text-slate-600 space-y-1",children:[e.jsxs("div",{children:["Accuracy: ",e.jsxs("span",{className:"font-medium",children:[x.toFixed(1),"%"]})]}),e.jsxs("div",{children:["Avg RT: ",e.jsxs("span",{className:"font-medium",children:[T.toFixed(0),"ms"]})]})]})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-white rounded border border-purple-200",children:e.jsxs("p",{className:"text-sm text-slate-700",children:[e.jsx("strong",{children:"The Stroop Effect:"})," Your responses were ",R.toFixed(0),"ms slower when the word meaning conflicted with the text color, demonstrating automatic word processing that interferes with color naming."]})})]}),e.jsx(v,{className:"bg-blue-50 border-blue-200",children:e.jsxs(_,{className:"p-6 text-center",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Want to see class results?"}),e.jsx("p",{className:"text-blue-800 text-sm mb-4",children:"View the instructor dashboard to see how your performance compares with your classmates."}),e.jsx(q,{to:"/results",children:e.jsxs(j,{variant:"outline",className:"border-blue-300 text-blue-700 hover:bg-blue-100",children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),"View Class Results"]})})]})})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-center",children:[e.jsx(q,{to:"/",children:e.jsxs(j,{className:"bg-purple-600 hover:bg-purple-700 font-semibold px-6",children:[e.jsx(Z,{className:"w-4 h-4 mr-2"}),"Return to Home"]})}),e.jsxs(j,{onClick:D,variant:"outline",className:"bg-white border-slate-200 hover:bg-slate-50 font-semibold px-6",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Download My Data"]}),e.jsx(q,{to:"/stroop",children:e.jsxs(j,{variant:"outline",className:"bg-white border-slate-200 hover:bg-slate-50 font-semibold px-6",children:[e.jsx(ue,{className:"w-4 h-4 mr-2"}),"Take Task Again"]})})]})]})})}function ge({results:t,onContinue:o}){const r=t.filter(n=>n.is_correct).length,m=r/t.length*100,l=t.filter(n=>n.is_correct&&n.participant_response!=="timeout").reduce((n,u)=>n+u.reaction_time,0)/r;return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-purple-50 flex items-center justify-center p-4",children:e.jsxs(v,{className:"w-full max-w-lg bg-white border-slate-200",children:[e.jsxs(Y,{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(X,{className:"w-6 h-6 text-green-600"})}),e.jsx(G,{className:"text-2xl",children:"Practice Complete!"}),e.jsx("p",{className:"text-slate-600",children:"Great job! Here's how you performed:"})]}),e.jsxs(_,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[e.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[e.jsxs("div",{className:"text-2xl font-bold text-slate-900",children:[m.toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-slate-600",children:"Accuracy"})]}),e.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[e.jsxs("div",{className:"text-2xl font-bold text-slate-900",children:[l?l.toFixed(0):"0","ms"]}),e.jsx("div",{className:"text-sm text-slate-600",children:"Avg Response Time"})]})]}),e.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-purple-900 mb-2",children:"ðŸŽ¯ Remember:"}),e.jsxs("ul",{className:"text-sm text-purple-800 space-y-1",children:[e.jsxs("li",{children:["â€¢ Press the key for the ",e.jsx("strong",{children:"color"})," of the text"]}),e.jsx("li",{children:"â€¢ Ignore what the word says"}),e.jsxs("li",{children:["â€¢ ",e.jsx("kbd",{className:"px-1 py-0.5 bg-white rounded text-xs",children:"B"}),"=Blue, ",e.jsx("kbd",{className:"px-1 py-0.5 bg-white rounded text-xs",children:"R"}),"=Red, ",e.jsx("kbd",{className:"px-1 py-0.5 bg-white rounded text-xs",children:"G"}),"=Green, ",e.jsx("kbd",{className:"px-1 py-0.5 bg-white rounded text-xs",children:"Y"}),"=Yellow"]}),e.jsx("li",{children:"â€¢ Respond as quickly and accurately as possible"})]})]}),e.jsxs(j,{onClick:o,className:"w-full",size:"lg",children:[e.jsx(Z,{className:"w-4 h-4 mr-2"}),"Begin Main Task"]})]})]})})}const B=40,U=10,$=3e3,z=[{word:"BLUE",color:"#3b82f6",type:"congruent",correct:"b"},{word:"RED",color:"#ef4444",type:"congruent",correct:"r"},{word:"GREEN",color:"#22c55e",type:"congruent",correct:"g"},{word:"YELLOW",color:"#eab308",type:"congruent",correct:"y"},{word:"BLUE",color:"#ef4444",type:"incongruent",correct:"r"},{word:"BLUE",color:"#22c55e",type:"incongruent",correct:"g"},{word:"BLUE",color:"#eab308",type:"incongruent",correct:"y"},{word:"RED",color:"#3b82f6",type:"incongruent",correct:"b"},{word:"RED",color:"#22c55e",type:"incongruent",correct:"g"},{word:"RED",color:"#eab308",type:"incongruent",correct:"y"},{word:"GREEN",color:"#3b82f6",type:"incongruent",correct:"b"},{word:"GREEN",color:"#ef4444",type:"incongruent",correct:"r"},{word:"GREEN",color:"#eab308",type:"incongruent",correct:"y"},{word:"YELLOW",color:"#3b82f6",type:"incongruent",correct:"b"},{word:"YELLOW",color:"#ef4444",type:"incongruent",correct:"r"},{word:"YELLOW",color:"#22c55e",type:"incongruent",correct:"g"}];function we(){const[t,o]=a.useState("setup"),[r,m]=a.useState({name:"",id:"",shareData:!1}),[l,n]=a.useState(0),[u,b]=a.useState(null),[x,S]=a.useState(null),[T,R]=a.useState(null),[D,s]=a.useState([]),[p,k]=a.useState([]),[h,f]=a.useState([]),[c,ee]=a.useState([]),[N,L]=a.useState(!1),[y,I]=a.useState(!1);le();const A=a.useCallback(i=>{const d=[];for(let g=0;g<i;g++)d.push(z[Math.floor(Math.random()*z.length)]);return d},[]);a.useEffect(()=>{t==="practice"?(ee(A(U)),n(0)):t==="task"&&(f(A(B)),n(0))},[t,A]);const O=a.useCallback(i=>{if(t!=="practice"&&t!=="task"||!N||y)return;const d=i.key.toLowerCase();if(!["b","r","g","y"].includes(d))return;const E=Date.now()-x,w=(t==="practice"?c:h)[l],ce=d===w.correct,H={student_name:r.name,student_id:r.id,trial_number:l+1,stimulus_type:w.type,stimulus_word:w.word,stimulus_color:w.color,correct_response:w.correct,participant_response:d,reaction_time:E,is_correct:ce,session_start_time:u,timestamp:new Date().toISOString(),task_type:"stroop",share_data:r.shareData};t==="practice"?s(P=>[...P,H]):k(P=>[...P,H]),M()},[t,N,y,x,l,c,h,r,u]);a.useEffect(()=>{if(!N||y)return;const i=setTimeout(()=>{const g=(t==="practice"?c:h)[l],E={student_name:r.name,student_id:r.id,trial_number:l+1,stimulus_type:g.type,stimulus_word:g.word,stimulus_color:g.color,correct_response:g.correct,participant_response:"timeout",reaction_time:$,is_correct:!1,session_start_time:u,timestamp:new Date().toISOString(),task_type:"stroop",share_data:r.shareData};t==="practice"?s(C=>[...C,E]):k(C=>[...C,E]),M()},$);return()=>clearTimeout(i)},[N,y,t,l,c,h,r,u]),a.useEffect(()=>(document.addEventListener("keydown",O),()=>document.removeEventListener("keydown",O)),[O]);const M=()=>{L(!1),I(!0),setTimeout(()=>{const i=t==="practice"?U:B;l+1>=i?t==="practice"?o("practice_complete"):re():(n(d=>d+1),I(!1),J())},1e3)},J=()=>{setTimeout(()=>{S(Date.now()),L(!0)},500+Math.random()*1e3)},te=i=>{m(i),b(new Date().toISOString()),o("practice")},se=()=>{n(0),L(!1),I(!1),o("task")},re=async()=>{try{const i=JSON.parse(localStorage.getItem("stroopResults")||"[]");if(localStorage.setItem("stroopResults",JSON.stringify([...i,...p])),r.shareData){for(const d of p)await fetch("/api/record",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)});console.log("Data shared with class successfully")}else console.log("Data kept private (not shared with class)")}catch(i){console.error("Error saving results:",i);const d=JSON.parse(localStorage.getItem("stroopResults")||"[]");localStorage.setItem("stroopResults",JSON.stringify([...d,...p]))}o("complete")};if(a.useEffect(()=>{(t==="practice"&&c.length>0||t==="task"&&h.length>0)&&J()},[t,c.length,h.length]),a.useEffect(()=>{const i=t==="practice"?c:h;i.length>0&&l<i.length&&R(i[l])},[t,l,c,h]),t==="setup")return e.jsx(xe,{onComplete:te});if(t==="practice_complete")return e.jsx(ge,{results:D,onContinue:se});if(t==="complete")return e.jsx(he,{results:p,studentInfo:r});const W=t==="practice"?U:B,ae=(l+1)/W*100;return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-purple-50 flex flex-col",children:[e.jsx("div",{className:"p-4 bg-white border-b border-slate-200",children:e.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(Q,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900",children:r.name}),e.jsx("p",{className:"text-xs text-slate-500",children:r.id})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-slate-700",children:[t==="practice"?"Practice":"Task"," Trial ",l+1," of ",W]}),e.jsx("div",{className:"w-48 mt-1",children:e.jsx(ne,{value:ae,className:"h-2"})})]})]})}),e.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:e.jsx(v,{className:"w-full max-w-2xl bg-white border-slate-200",children:e.jsx(_,{className:"p-16",children:e.jsx(pe,{stimulus:T,showStimulus:N,interTrialDelay:y,isPractice:t==="practice"})})})})]})}export{we as default};
