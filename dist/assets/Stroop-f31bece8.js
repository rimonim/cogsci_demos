import{j as e}from"./index-c78af160.js";import{r as m,u as I}from"./react-vendor-36975316.js";import{C as P,a as D}from"./button-b2bad4e5.js";import{u as G,T as M,S as U,P as A,e as B,b as F,f as Y,d as J}from"./PracticeComplete-024c88c1.js";import{U as W}from"./ui-vendor-7ca303c8.js";class ${static async create(o,a=!1){try{const c=JSON.parse(localStorage.getItem("stroopResults")||"[]"),l={...o,id:Date.now(),timestamp:new Date().toISOString()};if(c.push(l),localStorage.setItem("stroopResults",JSON.stringify(c)),a){const i=await fetch("/api/record",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(i.ok)return console.log("Stroop data shared with class successfully"),{success:!0,data:o,shared:!0};throw new Error(`HTTP ${i.status}: ${i.statusText}`)}else return console.log("Stroop data kept private (not shared with class)"),{success:!0,data:o,shared:!1}}catch(c){return console.warn("Failed to save to API, data stored locally:",c.message),{success:!1,error:c.message,data:o}}}static getLocal(){return JSON.parse(localStorage.getItem("stroopResults")||"[]")}static clearLocal(){return localStorage.removeItem("stroopResults"),{success:!0,message:"Local Stroop results cleared"}}}function K({stimulus:r,showStimulus:o,showingFixation:a,interTrialDelay:c,isPractice:l}){return c?e.jsx("div",{className:"text-center min-h-[200px] flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full"})}):a||!o&&!r?e.jsx("div",{className:"text-center min-h-[200px] flex items-center justify-center",children:e.jsx("div",{className:"text-2xl text-slate-400",children:"+"})}):o&&r?e.jsxs("div",{className:"text-center min-h-[200px] flex flex-col items-center justify-center",children:[e.jsx("div",{className:"text-6xl font-bold select-none mb-8",style:{color:r.color},children:r.word}),l&&e.jsx("div",{className:"text-sm text-slate-500 space-y-1",children:e.jsxs("div",{className:"flex items-center justify-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("kbd",{className:"px-2 py-1 bg-slate-100 rounded text-xs font-mono",children:"B"}),e.jsx("span",{className:"text-blue-600 font-medium",children:"Blue"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("kbd",{className:"px-2 py-1 bg-slate-100 rounded text-xs font-mono",children:"R"}),e.jsx("span",{className:"text-red-600 font-medium",children:"Red"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("kbd",{className:"px-2 py-1 bg-slate-100 rounded text-xs font-mono",children:"G"}),e.jsx("span",{className:"text-green-600 font-medium",children:"Green"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("kbd",{className:"px-2 py-1 bg-slate-100 rounded text-xs font-mono",children:"Y"}),e.jsx("span",{className:"text-yellow-600 font-medium",children:"Yellow"})]})]})})]}):e.jsx("div",{className:"text-center min-h-[200px] flex items-center justify-center",children:e.jsx("div",{className:"text-2xl text-slate-400",children:"+"})})}const H=40,q=10,z=3e3,j=[{word:"BLUE",color:"#3b82f6",type:"congruent",correct:"b"},{word:"RED",color:"#ef4444",type:"congruent",correct:"r"},{word:"GREEN",color:"#22c55e",type:"congruent",correct:"g"},{word:"YELLOW",color:"#eab308",type:"congruent",correct:"y"},{word:"BLUE",color:"#ef4444",type:"incongruent",correct:"r"},{word:"BLUE",color:"#22c55e",type:"incongruent",correct:"g"},{word:"BLUE",color:"#eab308",type:"incongruent",correct:"y"},{word:"RED",color:"#3b82f6",type:"incongruent",correct:"b"},{word:"RED",color:"#22c55e",type:"incongruent",correct:"g"},{word:"RED",color:"#eab308",type:"incongruent",correct:"y"},{word:"GREEN",color:"#3b82f6",type:"incongruent",correct:"b"},{word:"GREEN",color:"#ef4444",type:"incongruent",correct:"r"},{word:"GREEN",color:"#eab308",type:"incongruent",correct:"y"},{word:"YELLOW",color:"#3b82f6",type:"incongruent",correct:"b"},{word:"YELLOW",color:"#ef4444",type:"incongruent",correct:"r"},{word:"YELLOW",color:"#22c55e",type:"incongruent",correct:"g"}];function se(){const[r,o]=m.useState({name:"",id:"",shareData:!1}),[a,c]=m.useState(null),[l,i]=m.useState(null);I();const u=m.useCallback(t=>{const s=[];for(let n=0;n<t;n++)s.push(j[Math.floor(Math.random()*j.length)]);return s},[]),w=u(q),N=u(H),{phase:d,currentTrial:x,showStimulus:T,showingFixation:b,awaitingResponse:p,inInterTrialDelay:S,results:E,practiceResults:v,startPractice:R,startMainTask:C,handleResponse:f,getCurrentTrial:Q,totalTrials:h}=G({practiceTrials:w,mainTrials:N,responseTimeout:z,interTrialDelay:{practice:1e3,task:800},fixationDelay:800,showFixation:!0,onTrialStart:(t,s,n)=>{c(t)},onTrialEnd:(t,s,n,g)=>{const _=t.response===s.correct,y={...t,student_name:r.name,student_id:r.id,stimulus_type:s.type,stimulus_word:s.word,stimulus_color:s.color,correct_response:s.correct,participant_response:t.response,is_correct:_,session_start_time:l,task_type:"stroop",share_data:r.shareData};if(g==="task")try{$.create(y,r.shareData)}catch(k){console.error("Error saving result:",k)}return y},onPhaseComplete:(t,s)=>{console.log(`${t} phase completed with ${s.length} trials`)},onExperimentComplete:(t,s)=>{console.log("Stroop experiment completed!",{mainResults:t,practiceResults:s})}});m.useEffect(()=>{const t=s=>{if(!p)return;const n=s.key.toLowerCase();["b","r","g","y"].includes(n)&&f(n,Date.now())};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[p,f]);const O=t=>{o(t),i(new Date().toISOString()),R()},L=()=>{C()};return d==="setup"?e.jsx(M,{onComplete:O,config:U}):d==="practice_complete"?e.jsx(A,{results:v,onContinue:L,config:B}):d==="complete"?e.jsx(F,{results:E,studentInfo:r,config:Y}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-purple-50 flex flex-col",children:[e.jsx("div",{className:"p-4 bg-white border-b border-slate-200",children:e.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(W,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900",children:r.name}),e.jsx("p",{className:"text-xs text-slate-500",children:r.id})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-slate-700",children:[d==="practice"?"Practice":"Task"," Trial ",x+1," of ",h]}),e.jsx("div",{className:"w-48 mt-1",children:e.jsx(J,{value:(x+1)/h*100,className:"h-2"})})]})]})}),e.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:e.jsx(P,{className:"w-full max-w-2xl bg-white border-slate-200",children:e.jsx(D,{className:"p-16",children:e.jsx(K,{stimulus:a,showStimulus:T,showingFixation:b,interTrialDelay:S,isPractice:d==="practice"})})})})]})}export{se as default};
