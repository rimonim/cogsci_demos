import{j as e}from"./index-c78af160.js";import{r as l,u as L}from"./react-vendor-36975316.js";import{F as P}from"./FlankerResult-51025eab.js";import{C as N,a as T}from"./button-b2bad4e5.js";import{u as D,T as O,F as K,P as G,a as U,b as $,c as q,d as z}from"./PracticeComplete-024c88c1.js";import{U as B}from"./ui-vendor-7ca303c8.js";function H({showStimulus:n,stimulus:o,awaitingResponse:h,feedback:i}){const p=()=>!i||!i.show?"opacity-0":i.correct?"text-emerald-600 opacity-100":"text-red-600 opacity-100";return e.jsxs("div",{className:"h-48 w-full flex flex-col items-center justify-center transition-all duration-200",children:[e.jsx("div",{className:"h-24 flex items-center justify-center",children:n?e.jsx("div",{className:"text-6xl font-mono font-bold text-slate-900 tracking-wider select-none",children:o==null?void 0:o.display}):e.jsx("div",{className:"text-6xl font-bold text-slate-800 select-none",children:"+"})}),e.jsx("div",{className:"h-8 mt-4 text-xl font-semibold transition-opacity duration-300",children:i&&e.jsx("span",{className:p(),children:i.text})})]})}const J=40,Q=10,V=2e3,b=[{display:"<<<<<",type:"congruent",correct:"left"},{display:">>>>>",type:"congruent",correct:"right"},{display:"<<><<",type:"incongruent",correct:"right"},{display:">><>>",type:"incongruent",correct:"left"}];function ie(){const[n,o]=l.useState({name:"",id:"",shareData:!1}),[h,i]=l.useState(null),[p,f]=l.useState(null),[S,k]=l.useState(null);L();const g=l.useCallback(s=>{const t=[],a=Math.ceil(s/2),m=Math.floor(s/2);for(let r=0;r<a;r++)t.push(b[Math.floor(Math.random()*2)]);for(let r=0;r<m;r++)t.push(b[2+Math.floor(Math.random()*2)]);for(let r=t.length-1;r>0;r--){const c=Math.floor(Math.random()*(r+1));[t[r],t[c]]=[t[c],t[r]]}return t.slice(0,s)},[]),C=g(Q),v=g(J),{phase:d,currentTrial:j,showStimulus:E,showingFixation:W,awaitingResponse:x,inInterTrialDelay:X,results:_,practiceResults:Y,startPractice:R,startMainTask:F,handleResponse:y,getCurrentTrial:Z,totalTrials:w}=D({practiceTrials:C,mainTrials:v,responseTimeout:V,interTrialDelay:{practice:1200,task:500},fixationDelay:500,showFixation:!1,onTrialStart:(s,t,a)=>{i(s),f(null)},onTrialEnd:(s,t,a,m)=>{const r=s.response===t.correct,c={...s,student_name:n.name,student_id:n.id,stimulus_type:t.type,stimulus_display:t.display,correct_response:t.correct,participant_response:s.response,is_correct:r,session_start_time:S,task_type:"flanker",share_data:n.shareData};if(m==="practice"){const u=s.response==="timeout"?"Too Slow":r?"Correct!":"Incorrect";f({show:!0,text:u,correct:r})}if(m==="task")try{P.create(c,n.shareData)}catch(u){console.error("Error saving result:",u)}return c},onPhaseComplete:(s,t)=>{console.log(`${s} phase completed with ${t.length} trials`)},onExperimentComplete:(s,t)=>{console.log("Flanker experiment completed!",{mainResults:s,practiceResults:t})}});l.useEffect(()=>{const s=t=>{if(!x)return;let a=null;t.key==="ArrowLeft"?a="left":t.key==="ArrowRight"&&(a="right"),a&&y(a,Date.now())};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[x,y]);const I=(s,t,a=!1)=>{o({name:s,id:t,shareData:a}),k(new Date().toISOString()),R()},M=()=>{F()};if(d==="setup")return e.jsx(O,{onStart:I,config:K});if(d==="practice_complete")return e.jsx(G,{onStartExperiment:M,config:U});if(d==="complete")return e.jsx($,{results:_,studentInfo:n,config:q});const A=d==="practice"?"Practice Trial":"Trial";return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-4xl",children:[e.jsx(N,{className:"mb-8 bg-white/80 backdrop-blur-sm border-slate-200/60 shadow-lg",children:e.jsxs(T,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(B,{className:"w-5 h-5 text-slate-600"}),e.jsx("span",{className:"font-medium text-slate-900",children:n.name})]}),e.jsxs("div",{className:"text-sm text-slate-600",children:[A," ",j+1," of ",w]})]}),e.jsx(z,{value:(j+1)/w*100,className:"h-2"})]})}),e.jsx(N,{className:"bg-white/90 backdrop-blur-sm border-slate-200/60 shadow-2xl",children:e.jsx(T,{className:"p-6",children:e.jsx(H,{showStimulus:E,stimulus:h,awaitingResponse:x,feedback:p})})}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("div",{className:"inline-flex items-center gap-6 bg-white/80 backdrop-blur-sm rounded-full px-6 py-3 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx("kbd",{className:"px-2 py-1 bg-slate-100 rounded text-xs",children:"←"}),e.jsx("span",{children:"Left Arrow"})]}),e.jsx("div",{className:"w-px h-4 bg-slate-300"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx("kbd",{className:"px-2 py-1 bg-slate-100 rounded text-xs",children:"→"}),e.jsx("span",{children:"Right Arrow"})]})]})})]})})}export{ie as default};
